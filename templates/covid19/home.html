{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'jumbotron-narrow.css' %}">
    <!-- JS -->
    <script src="{% static 'jquery-3.6.0.min.js' %}"></script>
    <script src="{% static 'bootstrap.min.js' %}"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart', 'bar']});
        google.charts.load('current', {packages: ['corechart', 'line']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data_week = new google.visualization.DataTable();
            data_week.addColumn('string', '날짜');
            data_week.addColumn('number', '확진자');
            data_week.addColumn({type:'number', role:'annotation'})

            var data = new google.visualization.DataTable();
            data.addColumn('date', '날짜');
                data.addColumn('number', '확진자');

                data_week.addRows([
                    {% for d in data_week %}
                    ['{{d.string}}', {{d.today}}, {{d.today}}],
                    {% endfor %}
                  ]);

                data.addRows([
                    {% for d in data_list %}
                    [new Date('{{d}}'), {{d.today}}],
                    {% endfor %}
                  ]);

                var week_options = {
                vAxis: {
                  minValue: 0
                },
                  width: 700,
                  height: 400,
                };

                var options = {
                  vAxis: {
                      minValue: 0
                    },
                  width: 700,
                  height: 400,
                };

                var chart = new google.visualization.ColumnChart(document.getElementById('chart_week'));
                chart.draw(data_week, week_options);

                var charts = new google.visualization.LineChart(document.getElementById('chart_all'));
                charts.draw(data, options);
                }
    </script>

    <title>Covid19-KR</title>
</head>
<body>

<div align="center" class="container">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom">
            <a class="navbar-brand" href="{% url 'covid19:home' %}">COVID19-KR</a>
            <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse flex-grow-0" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item ">
                        <a class="nav-link" href="#">Github</a>
                    </li>
                </ul>
            </div>
        </nav>

    <div class="row marketing">
        <div class="card" style="width: 10rem; float:left; margin-right:15px;">
          <div class="card-body">
            <h5 class="card-title">누적 확진자</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{data.confirmed}}</h6>
          </div>
        </div>
         <div class="card" style="width: 10rem; float:left; margin-right:15px;">
          <div class="card-body">
            <h5 class="card-title">사망자</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{data.death}}</h6>
          </div>
        </div>
         <div class="card" style="width: 10rem; float:left; margin-right:15px;">
          <div class="card-body">
            <h5 class="card-title">완치자</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{data.released}}</h6>
          </div>
        </div>
         <div class="card" style="width: 10rem; float:left; margin-right:15px;">
          <div class="card-body">
            <h5 class="card-title">검사자</h5>
            <h6 class="card-subtitle mb-2 text-muted">{{data.tested}}</h6>
          </div>
        </div>

    </div>

    <h4>일별 신규 확진자수</h4>
    <div id="chart_week" style="width: 700px; height: 400px; margin:auto;"></div>
    <h4>확진자수 추이</h4>
    <div id="chart_all" style="width: 700px; height: 400px; margin:auto;"></div>

      <footer class="footer">
        <p>© Hyunmin 2021</p>
      </footer>

    </div> <!-- /container -->
  </body>
</html>